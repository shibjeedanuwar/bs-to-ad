<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Converter</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/nepali-date-converter/dist/nepali-date-converter.umd.js"></script>
    <style>
       


        /* Imports */
        @import url('https://fonts.googleapis.com/css?family=Poppins');

        /* Fonts */
        body {
            font-family: 'Poppins', sans-serif;
            /* font-family: "Poppins", serif; */
	background: rgb(238, 174, 202);
	background: radial-gradient(
		circle,
		rgba(238, 174, 202, 1) 0%,
		rgba(148, 187, 233, 1) 100%
	);
            margin: 0;
           
        }
        #shake{
           display:flex;

        }
        .calendar {
            width: 100%;
            height: auto; /* Allow height to adjust */
            aspect-ratio: 1; /* Maintain square aspect ratio */
            animation: swing ease-in-out 1s infinite alternate;
            transform-origin: center -20px;
            box-shadow: 0 14px 14px -10px rgba(0,0,0,0.25);
            margin: 0px; /* Add margin between calendars */
            position: relative; /* Needed for :before and :after pseudo-elements */
            display:none;


        }
        .calendar.active{
            display:block;
        }
        .calendar:before {
            position: absolute;
            content: '';
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 5px;
            height: 5px;
            background-color: black;
            border-radius: 50%;
        }
        .calendar:after {
            position: absolute;
            top: -10px;
            left: 50%;
            margin-left: -20px;
            content: '';
            width: 40px;
            height: 40px;
            border: 1px solid black;
            transform: rotate(45deg);
            z-index: -1;
        }
        .calendar__month,
        .calendar__day,
        .calendar__year {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 75px; /* Uniform height for all */
            background-color: crimson; /* Background for month and year */
            color: white;
            font-size: 2.5rem; /* Base font size */
        }
        .calendar__day {
            background-color: white; /* Different background for day */
            color: black; /* Different color for day */
            height: 225px; /* Taller for day */
            font-size: 6rem; /* Base font size */
        }
        .calendar__year {
            background-color: lightgray; /* Background for year */
            color: black;
        }

        /* Keyframes */
        @keyframes swing {
            0% { transform: rotate(3deg); }
            100% { transform: rotate(-3deg); }
        }

        /* Media Queries for smaller screens */
        @media (max-width: 600px) {
            .calendar__month,
            .calendar__year {
                height: 60px; /* Adjust height for smaller screens */
                font-size: 5vw; /* Responsive font size */
            }
            .calendar__day {
                height: 180px;
                font-size: 8vw; /* Responsive font size */
            }
        }
        
        @media (max-width: 400px) {
            .calendar__month,
            .calendar__year {
                height: 50px; /* Adjust height for very small screens */
                font-size: 10vw; /* Further responsive font size */
            }
            .calendar__day {
                height: 150px;
                font-size: 12vw; /* Further responsive font size */
            }
        }

    </style>
</head>
<body>


<div class="container mt-5">
     <div class="row">
        <div class="col-12 col-md-8 m-md-auto">

        
 <h1 class="text-center">Date Converter</h1>
    <div class="text-center mb-3">
        <button id="toggleButton" class="btn btn-primary">Switch to English to Nepali</button>
        <div class="alert alert-success mt-2 mb-2 text-center "style="display:none;" role="alert" id="copy_Handle">
        </div>
        <div class="alert alert-danger mt-2 mb-2 text-center " style="display:none;" role="alert" id="error_Handle">
            
        </div>
    </div>
    
    <div id="nepaliToEnglish" class="mb-4 shadow p-2 ">
        <h4>Select Nepali Date:</h4>
        
        <div class="form-row">
            <div class="form-group col-md-4">
                <label for="nepaliYearInput">Year:</label>
                <select id="nepaliYearInput" class="form-control"></select>
            </div>
            <div class="form-group col-md-4">
                <label for="nepaliMonthInput">Month:</label>
                <select id="nepaliMonthInput" class="form-control"></select>
            </div>
            <div class="form-group col-md-4">
                <label for="nepaliDayInput">Day:</label>
                <select id="nepaliDayInput" class="form-control"></select>
            </div>
        </div>
        <button id="convertNepaliButton" class="btn btn-success mt-2">Convert to English</button>
    </div>

    <div id="englishToNepali" class="mb-4 d-none shadow p-2 d-none">
        <label for="englishDateInput">Enter English Date (MM/DD/YYYY):</label>
        <input type="date" id="englishDateInput" class="form-control " placeholder="10/19/2024">
        <button id="convertEnglishButton" class="btn btn-success mt-2">Convert to Nepali</button>
    </div> 

    <!-- output div section -->
    <div class=" p-3  " id="shake">
        
        <div class="calendar">
            <div class="calendar__month" id="ht-year">YEAR</div>
            <div id="js-year" class="calendar__day"></div>
        </div>
        <div class="calendar">
            <div class="calendar__month" id="ht-month">MONTH</div>
            <div id="js-month" class="calendar__day"></div>
        </div>
        <div class="calendar">
            <div class="calendar__month" id ='ht-day'>DAY</div>
            <div id="js-day" class="calendar__day"></div>
        </div>
    </div>


    <!-- output div section -->

    <b id="result" class="mt-3 btn"></b><span></span>
       </div>
       .
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    const NepaliDate = window.NepaliDate;
    
    const nepaliMonths = [
        { name: "Baisakh", days: 30 },
        { name: "Jestha", days: 31 },
        { name: "Asar", days: 30 },
        { name: "Shrawan", days: 31 },
        { name: "Bhadra", days: 30 },
        { name: "Aswin", days: 29 },
        { name: "Kartik", days: 30 },
        { name: "Mangsir", days: 29 },
        { name: "Poush", days: 30 },
        { name: "Magh", days: 29 },
        { name: "Falgun", days: 30 },
        { name: "Chaitra", days: 30 }
    ];

    function populateNepaliDateSelectors() {
        const currentYear = new Date().getFullYear() + 57; // Approximation for Nepali calendar
        const $yearSelect = $('#nepaliYearInput');
        const $monthSelect = $('#nepaliMonthInput');
        const $daySelect = $('#nepaliDayInput');

        // Populate years
        for (let year = currentYear - 70; year <= currentYear + 10; year++) {
            $yearSelect.append(new Option(year, year));
        }

        // Populate months
        nepaliMonths.forEach((month, index) => {
            $monthSelect.append(new Option(month.name, index));
        });

        // Populate days
        updateDayOptions($monthSelect.val());

        // Change days based on month selection
        $monthSelect.change(() => {
            updateDayOptions($monthSelect.val());
        });
    }

    function updateDayOptions(monthIndex) {
        const $daySelect = $('#nepaliDayInput');
        $daySelect.empty(); // Clear previous options

        const maxDays = nepaliMonths[monthIndex].days;

        for (let day = 1; day <= maxDays; day++) {
            $daySelect.append(new Option(day, day));
        }
    }

    function handle_Error(arg) {
    $('#error_Handle').html(`<strong>Error!</strong> ${arg}`).show();
    
    // Hide the error message after 5 seconds
    setTimeout(() => {
        $('#error_Handle').hide(); // You can use .hide() if you prefer
    }, 5000); // 5000 milliseconds = 5 seconds
}

function copy_Handle(arg) {
    $('#copy_Handle').html(`<strong>Error!</strong> ${arg}`).show();
    
    // Hide the error message after 5 seconds
    setTimeout(() => {
        $('#error_Handle').hide(); // You can use .hide() if you prefer
    }, 5000); // 5000 milliseconds = 5 seconds
}

    // Call function to populate dropdowns
    populateNepaliDateSelectors();

    $('#toggleButton').click(() => {
    // Check if the Nepali to English section is currently visible
    if ($('#nepaliToEnglish').hasClass('d-none')) {
        // If it's hidden, show it and hide the English to Nepali section
        $('#nepaliToEnglish').removeClass('d-none');
        $('#englishToNepali').addClass('d-none');
        $('#toggleButton').text('Switch to English to Nepali'); // Update button text
    } else {
        // If it's visible, hide it and show the English to Nepali section
        $('#nepaliToEnglish').addClass('d-none');
        $('#englishToNepali').removeClass('d-none');
        $('#toggleButton').text('Switch to Nepali to English'); // Update button text
    }

    // Clear the result when switching
    $('#result').text('');

    // Remove 'active' class from calendars
    if ($('.calendar').hasClass('active')) {
        $('.calendar').removeClass('active');
        $('#shake').removeClass('shadow');
    }

    // here i'm remove #ht-text like stupid
        $('#ht-month').text('Month');
        $('#ht-day').text('Day');
        $('#ht-year').text('Year');

});

    $('#convertNepaliButton').click(() => {
        const year = parseInt($('#nepaliYearInput').val(), 10);
        const month = Number($('#nepaliMonthInput').val());
        const day = parseInt($('#nepaliDayInput').val(), 10);
        $('#nepaliToEnglish').addClass('d-none');

        // Check if day is valid
        if (day < 1 || day > nepaliMonths[month].days) {
            handle_Error('Invalid Nepali date.');
            return;
        }
        // Check if any input field is empty
    


        // alert('eng');
        try {
            const nepaliDate = new NepaliDate(year, month, day); // Month is 0-indexed
            const jsDate = nepaliDate.toJsDate();

            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = jsDate.toLocaleDateString('en-US', options);
            $('#result').text(`Converted English Date: ${formattedDate}`);


            // Extract year, month, and day from formattedDate
            const dateParts = formattedDate.split(' ');
            const monthName = dateParts[0].substring(0, 3); // Shortened month name
            const dayStr = dateParts[1].replace(',', '');
            const yearStr = dateParts[2];

            // You have to note here Update the elements  text vice varsa  values to maintain the eglish date stander
            $('#ht-year').text('Month');
            $('#js-year').text(monthName);
            $('#ht-month').text('Day');
            $('#js-month').text(dayStr);
            $('#ht-day').text('Year');
            $('#js-day').text(yearStr);

            
            //   you can uncommnet this but  before you have to frist Comment $('#ht-year')from 6  line of code
            /*$('#js-month').text(monthName);
            $('#js-day').text(dayStr);
            $('#js-year').text(yearStr);*/


            $('.calendar').toggleClass('active');
            if ($('.calendar').hasClass('active')) {
        $('#shake').addClass('shadow');
    }
            

        } catch (error) {
            handle_Error('Invalid Nepali date.');
        }
    });

    $('#convertEnglishButton').click(() => {

        const englishDateStr = $('#englishDateInput').val();
        if (englishDateStr=='') {
        handle_Error('Please enter the date.');
        return;
    }
    $('#englishToNepali').addClass('d-none');

        try {
            const jsDate = new Date(englishDateStr);
            const nepaliDate = new NepaliDate(jsDate);
            const formattedNepaliDate = nepaliDate.format('YYYY/MM/DD', 'en');

            // Extract year, month, and day from formattedNepaliDate
            const [year, month, day] = formattedNepaliDate.split('/').map(Number);
            $('#result').text(`Converted Nepali Date: ${year}/${nepaliMonths[month - 1].name}/${day}`);
            $('.calendar').toggleClass('active');
            if ($('.calendar').hasClass('active')) {
        $('#shake').addClass('shadow');
    }
            // Update the elements with the extracted values
            $('#js-year').text(year);
            $('#js-month').text(month); // Month name)
            $('#js-day').text(day);

        } catch (error) {
            handle_Error(arg)('Invalid English date. Please use MM-DD-YYYY.');
        }
    });




</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>